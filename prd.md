# 项目规则 - 喵宇宙

## 技术栈约束
- 前端:使用原生 JavaScript,不使用任何框架
- 样式:使用内联 CSS 或 `<style>` 标签,不使用 CSS 预处理器
- 数据库:使用 Supabase
- 认证:使用 Supabase Auth

## 代码风格
- 所有函数和变量使用清晰的英文命名
- 每个函数前添加注释,说明功能
- 关键代码行添加行内注释
- 代码要简洁,避免过度封装

## 文件组织
- 阶段 1-4:单文件 `index.html`
- 阶段 5+:分离 `index.html`、`style.css`、`script.js`
- 阶段 6+:添加 `/api` 文件夹存放后端代码

## 功能实现原则
- 优先使用浏览器原生 API,减少依赖
- 如需使用第三方库,优先使用 CDN 引入
- 每次只修改一个功能,不做大规模重构
- 图片上传要处理压缩和格式转换

## 禁止事项
- 不使用构建工具(Webpack/Vite)
- 不使用 TypeScript
- 不过度抽象,保持代码直观易懂

## 数据库
### 连接串
```
postgresql://postgres:[YOUR_PASSWORD]@db.vswrhnmhumfxgfrwpfwc.supabase.co:5432/postgres
```
### 表结构
```sql
create table public.cats (
  id bigint generated by default as identity not null,
  name character varying not null,
  breed character varying null,
  age numeric null,
  sex smallint null,
  description text null,
  tags character varying null,
  created_at timestamp with time zone not null default now(),
  updated_at timestamp without time zone null default now(),
  images text[] null,
  constraint cat_pkey primary key (id)
) TABLESPACE pg_default;
```

### RLS 策略配置：
数据库已配置公开访问策略，允许所有人读写。详细配置步骤参见 [docs/supabase-config-guide.md](docs/supabase-config-guide.md)。

### Supabase Storage 配置：
**Storage Bucket**: `cat-images`
- 用于存储猫咪照片
- Public bucket（公开访问）
- 文件组织：`{catId}/{timestamp}_{randomString}.{ext}`
