<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–µå®‡å®™ - çŒ«å’ªå±•ç¤ºå¡ç‰‡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            width: 100%;
        }

        .title {
            text-align: center;
            color: white;
            font-size: 2.5rem;
            margin-bottom: 40px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            padding: 20px;
        }

        /* Cat card styling */
        .cat-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .cat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .cat-image-container {
            width: 100%;
            height: 250px;
            overflow: hidden;
            background: #f5f5f5;
            position: relative;
        }

        .cat-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .cat-card:hover .cat-image {
            transform: scale(1.1);
        }

        .cat-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.95);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Photo upload button styling */
        .upload-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(102, 126, 234, 0.95);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .upload-button:hover {
            background: rgba(102, 126, 234, 1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        .cat-image-container:hover .upload-button {
            opacity: 1;
        }

        .cat-image-container:hover::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            z-index: 5;
        }

        /* Hide file input */
        .file-input {
            display: none;
        }

        .cat-info {
            padding: 20px;
        }

        .cat-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .cat-breed {
            color: #667eea;
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .cat-description {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .cat-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .stat-item {
            flex: 1;
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .stat-label {
            font-size: 0.75rem;
            color: #999;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: #333;
        }

        .cat-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            padding: 5px 12px;
            background: #e9ecef;
            color: #495057;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        /* Loading animation */
        .loading {
            text-align: center;
            color: white;
            font-size: 1.2rem;
        }

        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">ğŸ± å–µå®‡å®™ </h1>
        <div id="cardsContainer" class="cards-grid">
            <div class="loading">
                <div class="loading-spinner"></div>
                <p>åŠ è½½ä¸­...</p>
            </div>
        </div>
    </div>

    <script>
        // Sample cat data - ç¤ºä¾‹çŒ«å’ªæ•°æ®
        const catsData = [
            {
                id: 1,
                name: "å°æ©˜",
                breed: "æ©˜çŒ«",
                age: "2å²",
                gender: "å…¬",
                description: "æ€§æ ¼æ¸©é¡ºï¼Œå–œæ¬¢æ™’å¤ªé˜³ï¼Œå¯¹å°é±¼å¹²æ²¡æœ‰æŠµæŠ—åŠ›ã€‚æ˜¯ä¸ªä¸æŠ˜ä¸æ‰£çš„åƒè´§ï¼Œçœ‹è§é£Ÿç‰©å°±ä¼šå–µå–µå«ã€‚",
                image: "https://images.unsplash.com/photo-1574158622682-e40e69881006?w=500&h=400&fit=crop",
                badge: "æœ€å—æ¬¢è¿",
                tags: ["æ¸©é¡º", "äº²äºº", "åƒè´§"]
            },
            {
                id: 2,
                name: "é›ªçƒ",
                breed: "è‹±å›½çŸ­æ¯›çŒ«",
                age: "1å²",
                gender: "æ¯",
                description: "ä¼˜é›…çš„å°å…¬ä¸»ï¼Œæ¯›è‰²é›ªç™½çº¯å‡€ï¼Œçœ¼ç›æ˜¯æ¼‚äº®çš„è“è‰²ã€‚å–œæ¬¢å®‰é™çš„ç¯å¢ƒï¼Œå¶å°”ä¼šé«˜å†·ã€‚",
                image: "https://images.unsplash.com/photo-1513360371669-4adf3dd7dff8?w=500&h=400&fit=crop",
                badge: "æ–°æˆå‘˜",
                tags: ["ä¼˜é›…", "å®‰é™", "é«˜å†·"]
            },
            {
                id: 3,
                name: "è™æ–‘",
                breed: "ç¾å›½çŸ­æ¯›çŒ«",
                age: "3å²",
                gender: "å…¬",
                description: "æ´»åŠ›åè¶³çš„è¿åŠ¨å¥å°†ï¼Œå–œæ¬¢çˆ¬é«˜ä¸Šä½ï¼Œå¯¹é€—çŒ«æ£’å’Œæ¿€å…‰ç¬”éå¸¸æ„Ÿå…´è¶£ã€‚",
                image: "https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=500&h=400&fit=crop",
                badge: "æ´»åŠ›ä¹‹æ˜Ÿ",
                tags: ["æ´»æ³¼", "å¥½åŠ¨", "çˆ±ç©"]
            },
            {
                id: 4,
                name: "å¸ƒä¸",
                breed: "å¸ƒå¶çŒ«",
                age: "1.5å²",
                gender: "æ¯",
                description: "æ‹¥æœ‰æ·±è“è‰²çš„çœ¼ç›å’ŒæŸ”è½¯çš„é•¿æ¯›ï¼Œæ€§æ ¼æ¸©æŸ”ä½“è´´ï¼Œæ˜¯å®Œç¾çš„é™ªä¼´å‹çŒ«å’ªã€‚",
                image: "https://images.unsplash.com/photo-1529778873920-4da4926a72c2?w=500&h=400&fit=crop",
                badge: "æ¸©æŸ”å¤©ä½¿",
                tags: ["æ¸©æŸ”", "ç²˜äºº", "é¢œå€¼é«˜"]
            },
            {
                id: 5,
                name: "é»‘ç‚­",
                breed: "é»‘çŒ«",
                age: "4å²",
                gender: "å…¬",
                description: "å…¨èº«ä¹Œé»‘å‘äº®ï¼Œçœ¼ç›åœ¨é»‘æš—ä¸­ä¼šå‘å‡ºç¥ç§˜çš„ç»¿å…‰ã€‚æ€§æ ¼ç‹¬ç«‹ï¼Œä½†å¯¹ä¸»äººéå¸¸å¿ è¯šã€‚",
                image: "https://images.unsplash.com/photo-1494256997604-768d1f608cac?w=500&h=400&fit=crop",
                badge: "ç¥ç§˜ä½¿è€…",
                tags: ["ç‹¬ç«‹", "å¿ è¯š", "ç¥ç§˜"]
            },
            {
                id: 6,
                name: "å¥¶èŒ¶",
                breed: "æš¹ç½—çŒ«",
                age: "2.5å²",
                gender: "æ¯",
                description: "æ‹¥æœ‰ç‹¬ç‰¹çš„é‡ç‚¹è‰²èŠ±çº¹å’Œè“å®çŸ³èˆ¬çš„çœ¼ç›ã€‚æ€§æ ¼æ´»æ³¼ï¼Œå–œæ¬¢ä¸äººäº¤æµï¼Œå«å£°ç‹¬ç‰¹ã€‚",
                image: "https://images.unsplash.com/photo-1543852786-1cf6624b9987?w=500&h=400&fit=crop",
                badge: "è¯ç—¨å°å§",
                tags: ["æ´»æ³¼", "å¥è°ˆ", "èªæ˜"]
            }
        ];

        /**
         * Initialize the cat cards display
         * åˆå§‹åŒ–çŒ«å’ªå¡ç‰‡å±•ç¤º
         */
        function initCatCards() {
            const container = document.getElementById('cardsContainer');

            // Simulate loading delay - æ¨¡æ‹ŸåŠ è½½å»¶è¿Ÿ
            setTimeout(() => {
                container.innerHTML = '';

                // Render each cat card - æ¸²æŸ“æ¯ä¸ªçŒ«å’ªå¡ç‰‡
                catsData.forEach(cat => {
                    const card = createCatCard(cat);
                    container.appendChild(card);
                });

                // Load saved images after cards are rendered - å¡ç‰‡æ¸²æŸ“ååŠ è½½ä¿å­˜çš„å›¾ç‰‡
                setTimeout(() => {
                    loadSavedImages();
                }, 100);
            }, 800);
        }

        /**
         * Create a single cat card element
         * åˆ›å»ºå•ä¸ªçŒ«å’ªå¡ç‰‡å…ƒç´ 
         * @param {Object} cat - Cat data object
         * @returns {HTMLElement} - Card element
         */
        function createCatCard(cat) {
            // Create card container - åˆ›å»ºå¡ç‰‡å®¹å™¨
            const card = document.createElement('div');
            card.className = 'cat-card';
            card.setAttribute('data-cat-id', cat.id);

            // Build card HTML - æ„å»ºå¡ç‰‡HTML
            card.innerHTML = `
                <div class="cat-image-container">
                    <img src="${cat.image}" alt="${cat.name}" class="cat-image" data-cat-id="${cat.id}">
                    <div class="cat-badge">${cat.badge}</div>
                    <button class="upload-button" data-cat-id="${cat.id}">ğŸ“· é€‰æ‹©ç…§ç‰‡</button>
                    <input type="file" class="file-input" accept="image/*" data-cat-id="${cat.id}">
                </div>
                <div class="cat-info">
                    <h2 class="cat-name">${cat.name}</h2>
                    <div class="cat-breed">${cat.breed}</div>
                    <p class="cat-description">${cat.description}</p>
                    <div class="cat-stats">
                        <div class="stat-item">
                            <div class="stat-label">å¹´é¾„</div>
                            <div class="stat-value">${cat.age}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">æ€§åˆ«</div>
                            <div class="stat-value">${cat.gender}</div>
                        </div>
                    </div>
                    <div class="cat-tags">
                        ${cat.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                </div>
            `;

            // Setup photo upload functionality - è®¾ç½®ç…§ç‰‡ä¸Šä¼ åŠŸèƒ½
            setupPhotoUpload(card, cat.id);

            return card;
        }

        /**
         * Setup photo upload functionality for a cat card
         * ä¸ºçŒ«å’ªå¡ç‰‡è®¾ç½®ç…§ç‰‡ä¸Šä¼ åŠŸèƒ½
         * @param {HTMLElement} card - Card element
         * @param {number} catId - Cat ID
         */
        function setupPhotoUpload(card, catId) {
            const uploadButton = card.querySelector('.upload-button');
            const fileInput = card.querySelector('.file-input');
            const catImage = card.querySelector('.cat-image');

            // Click upload button to trigger file input - ç‚¹å‡»ä¸Šä¼ æŒ‰é’®è§¦å‘æ–‡ä»¶é€‰æ‹©
            uploadButton.addEventListener('click', (event) => {
                event.stopPropagation(); // Prevent card click event - é˜»æ­¢å¡ç‰‡ç‚¹å‡»äº‹ä»¶
                fileInput.click();
            });

            // Handle file selection - å¤„ç†æ–‡ä»¶é€‰æ‹©
            fileInput.addEventListener('change', (event) => {
                const file = event.target.files[0];

                // Validate file exists and is an image - éªŒè¯æ–‡ä»¶å­˜åœ¨ä¸”ä¸ºå›¾ç‰‡
                if (!file || !file.type.startsWith('image/')) {
                    alert('è¯·é€‰æ‹©æœ‰æ•ˆçš„å›¾ç‰‡æ–‡ä»¶');
                    return;
                }

                // Process and display the uploaded image - å¤„ç†å¹¶æ˜¾ç¤ºä¸Šä¼ çš„å›¾ç‰‡
                processAndDisplayImage(file, catImage, catId);
            });
        }

        /**
         * Process uploaded image and display it on the card
         * å¤„ç†ä¸Šä¼ çš„å›¾ç‰‡å¹¶åœ¨å¡ç‰‡ä¸Šæ˜¾ç¤º
         * @param {File} file - Image file
         * @param {HTMLImageElement} imgElement - Image element to update
         * @param {number} catId - Cat ID
         */
        function processAndDisplayImage(file, imgElement, catId) {
            const reader = new FileReader();

            // Read file and convert to data URL - è¯»å–æ–‡ä»¶å¹¶è½¬æ¢ä¸ºæ•°æ®URL
            reader.onload = (e) => {
                const imageUrl = e.target.result;

                // Update image source - æ›´æ–°å›¾ç‰‡æº
                // CSS object-fit: cover will handle cropping automatically
                // CSSçš„object-fit: coverä¼šè‡ªåŠ¨å¤„ç†è£å‰ª
                imgElement.src = imageUrl;

                // Store in localStorage for persistence - å­˜å‚¨åˆ°æœ¬åœ°å­˜å‚¨ä»¥æŒä¹…åŒ–
                try {
                    localStorage.setItem(`cat-image-${catId}`, imageUrl);
                } catch (e) {
                    console.warn('æ— æ³•ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°å­˜å‚¨:', e);
                }
            };

            reader.onerror = () => {
                alert('æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œè¯·é‡è¯•');
            };

            // Read file as data URL - è¯»å–æ–‡ä»¶ä¸ºæ•°æ®URL
            reader.readAsDataURL(file);
        }

        /**
         * Load saved images from localStorage
         * ä»æœ¬åœ°å­˜å‚¨åŠ è½½ä¿å­˜çš„å›¾ç‰‡
         */
        function loadSavedImages() {
            catsData.forEach(cat => {
                const savedImage = localStorage.getItem(`cat-image-${cat.id}`);
                if (savedImage) {
                    const imgElement = document.querySelector(`.cat-image[data-cat-id="${cat.id}"]`);
                    if (imgElement) {
                        imgElement.src = savedImage;
                    }
                }
            });
        }

        /**
         * Handle cat card click event
         * å¤„ç†çŒ«å’ªå¡ç‰‡ç‚¹å‡»äº‹ä»¶
         * @param {Object} cat - Cat data object
         */
        function handleCardClick(cat) {
            alert(`ä½ é€‰æ‹©äº†: ${cat.name}\nå“ç§: ${cat.breed}\n${cat.description}`);
            // In a real application, this could navigate to a detail page
            // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œå¯ä»¥è·³è½¬åˆ°è¯¦æƒ…é¡µé¢
        }

        /**
         * Handle image loading errors
         * å¤„ç†å›¾ç‰‡åŠ è½½é”™è¯¯
         * @param {Event} event - Error event
         */
        function handleImageError(event) {
            // Use a placeholder image on error - é”™è¯¯æ—¶ä½¿ç”¨å ä½å›¾ç‰‡
            event.target.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="500" height="400"%3E%3Crect fill="%23f0f0f0" width="500" height="400"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="24" dy="200" dx="180"%3EçŒ«å’ªå›¾ç‰‡%3C/text%3E%3C/svg%3E';
        }

        // Add global error handler for images - ä¸ºå›¾ç‰‡æ·»åŠ å…¨å±€é”™è¯¯å¤„ç†
        document.addEventListener('error', (event) => {
            if (event.target.tagName === 'IMG') {
                handleImageError(event);
            }
        }, true);

        // Initialize when DOM is ready - DOMå‡†å¤‡å¥½ååˆå§‹åŒ–
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initCatCards);
        } else {
            initCatCards();
        }
    </script>
</body>
</html>